# Идентификация торговых инструментов

Для точного определения торговых инструментов используются разные идентификаторы: 

<ol>
<li><p><strong>Isin</strong> (International Security Identification Number) — международный 
идентификационный номер ценной бумаги. Состоит из 12 символов цифр и латинских букв, 
которые обычно начинаются с 2-буквенного кода страны эмитента ценной бумаги.  </p>
<p><strong>Структура ISIN</strong><br/>Первые два символа — буквы, определяющие код страны эмитента согласно стандарту ISO 3166-1 — например, российские ISIN-коды начинаются буквами RU.<br/>Далее — 9 букв и цифр национального идентификационного кода ценной бумаги (National Securities Identifying Number, NSIN).
Завершает код контрольная цифра. Например, ISIN акции TCS Group — US87238U2033.</p>
</li>
<li><p><strong>Ticker</strong> — краткое (1–5 букв) наименование ценной бумаги на конкретной бирже. Без 
указания биржи и режима торгов это просто набор букв — поэтому на российских биржах MOEX и SPBE используется специальный признак «Режим торгов», который соответствует техническому термину <code>class_code</code>. 
Комбинация тикера и <code>class_code</code> является уникальным идентификатором, только тикер — нет.<br/>Например, тикер Т-Технологий — T.</p>
</li>
<li><p><strong>FIGI</strong> (Financial Instrument Global Identifier) — глобальный идентификатор 
финансового инструмента. Представляет собой 12-символьный код из латинских букв и цифр.
Определяется как идентификатор ценной бумаги на торговой площадке (бирже), которая 
является некоторым «источником цен».</p>
<p><strong>Обратите внимание:</strong> FIGI, присваемые в Т-Инвестициях, не всегда совпадают с международным классификатором. Это устаревший параметр, который не рекомендуется использовать.
Используйте <code>uid</code> — уникальный идентификатор в формате <code>uuid</code>. </p>
</li>
</ol>

## Идентификаторы из модели финансовых инструментов Т-Инвестиций

В Т-Инвестициях применяется иерархическая система идентификации финансовых объектов.

**Бренд**

На верхнем уровне находится бренд — работающая на финансовом рынке компания, которая является эмитентом ценных бумаг. Пример бренда — Сбербанк. 

**Актив**

У бренда может несколько финансовых инструментов: акции, в том числе на разных биржах, облигации и прочее. Каждая из ценных бумаг называется актив. 

**Позиция**

Один и тот же актив может торговаться на разных биржах. Совокупность актива и торговой площадки (биржи) — это позиция.

В некоторых ситуациях размещение бумаг на бирже, выплаты купонов и дивидендов проходят позициям, которые отличаются от тех, что торгуются на бирже или находятся в портфеле.

**Торговый инструмент**

Одна и та же позиция может торговаться в разных режимах торгов и по разной цене. Например, валюта разной лотности может иметь различную стоимость, а акцию можно продать на биржевом и внебиржевом рынках, то есть в торговле на выходных.

Поэтому есть еще один идентификатор — торговый инструмент. Он определяется как ценная бумага на торговой площадке (бирже) в указанном режиме торгов. Получить котировки можно только по торговому инструменту.

## Параметры в API

- `uid` бренда — идентификатор компании;
- `asset_uid` — идентификатор актива;
- `position_uid` — идентификатор позиции;
- `instrument_uid` — идентификатор торгового инструмента;
- `ticker` — тикер;
- `class_code` — класс-код (секция торгов).

### Instrument_Id

Для удобства клиентов, которые в своих системах использовали устаревший идентификатор FIGI, в большинстве методов 
T-Invest API предусмотрено универсальное поле **Instrument_Id** — в нем можно передавать как `FIGI`, так и `instrument_uid`.

Вы можете получить идентификаторы конкретного инструмента через метод [FindInstrument](/invest/services/instruments/head-instruments/#findinstrument), передав в параметре `query` известный идентификатор или название инструмента.

Основной идентификатор торгового инструмента при работе с T-Invest API — `UID`, так как, например, в 
опционах идентификатор FIGI не поддерживается.


### Ticker и Class_Code

Для удобства взаимодействия во входной параметр `instrument_id` методов API можно передать `ticker` и `class_code` инструмента в формате `ticker + '_' + class_code`.
Пример использования комбинации тикера и класс-кода для акций "Т-Технологии" на московской бирже:

```python
`instrument_id = 'T_TQBR'`
```

#### Как получить тикер и класс-код

Чтобы узнать значения параметров, получите детали методами [сервиса инструментов](/invest/services/instruments/head-instruments).
Тикер и класс-код также присутствует в ответах всех методов сервисов, где ожидается получить идентификаторы инструмента.


#### Популярные класс-коды

| Класс-код | Описание                                                             |
|-----------|----------------------------------------------------------------------|
| TQBR      | Основной режим торгов акциями на Московской бирже                    |
| TQOB      | Основной режим торгов облигациями на Московской бирже                |
| SPBRU     | Основной режим торгов акциями и фондами на Санкт-Петербургской бирже |
| SPBFUT    | Торговля фьючерсами на Московской бирже                              |
| SPBOPT    | Торговля опционами на Московской бирже                               |
| TQTF      | Основной режим торгов фондами на Московской бирже                    |
| CETS      | Основной режим торгов валютой на Московской бирже                    |


