---
sidebar_position: 3
---

# Стрим операций

**operations_stream** — cтрим-соединение T-Invest API для получения операций.



## Поддерживаемые типы операций

На текущий момент стрим поддерживает только неторговые операции, некоторые из них: 
 - комиссии;
 - пополнения\списания денежных средств;
 - начисление\списание вариационной маржи;
 - зачисление купонов\дивидендов;
 - налоги;



## Особенности работы

В работе метода есть ряд особенностей, которые необходимо учитывать:
 - Некоторые операции, например, комиссия за сделку может передаваться несколько раз, при этом имея **разные** идентификаторы `id`.
Необходимо обновлять параметры операции при каждом новом сообщении, используя связку `parent_operation_id` — номер родительской операции
и `type` — тип операции.
 - Вариационная маржа приходит в виде событий с разбивкой по каждому инструменту и отдельным дополнительным сообщением с итоговой суммой.
 - Операции в валюте, такие как перевод средств между брокерскими счетами, приходят в эквиваленте в рублях.
 - `parent_operation_id` — номер родительской операции, для комиссий это биржевой номер заявки.


